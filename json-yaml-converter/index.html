<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JSON ‚Üî YAML –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä</title>
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
      min-height: 100vh;
      padding: 2rem;
      color: #e2e8f0;
    }
    .container { max-width: 720px; margin: 0 auto; }
    h1 { font-size: 1.5rem; margin-bottom: 0.5rem; color: #fff; }
    .sub { color: #94a3b8; font-size: 0.9rem; margin-bottom: 1.5rem; }
    .row {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 1rem;
      align-items: start;
      margin-bottom: 1rem;
    }
    @media (max-width: 640px) {
      .row { grid-template-columns: 1fr; }
      .arrow { display: none; }
    }
    .card {
      background: rgba(30, 58, 95, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.2);
      border-radius: 12px;
      padding: 1rem;
    }
    .card.error { border-color: #f87171; }
    .card label {
      display: block;
      color: #94a3b8;
      font-size: 0.85rem;
      margin-bottom: 0.35rem;
    }
    textarea {
      width: 100%;
      min-height: 180px;
      padding: 0.75rem 1rem;
      font-size: 0.9rem;
      font-family: 'Consolas', 'Monaco', monospace;
      border: 2px solid #334155;
      border-radius: 8px;
      background: #0f172a;
      color: #e2e8f0;
      resize: vertical;
    }
    textarea:focus { outline: none; border-color: #3b82f6; }
    .arrow {
      display: flex;
      align-items: center;
      justify-content: center;
      padding-top: 2.5rem;
      color: #64748b;
      font-size: 1.5rem;
    }
    .arrow span { cursor: pointer; }
    .arrow span:hover { color: #3b82f6; }
    .btns { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.75rem; }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-size: 0.9rem;
      cursor: pointer;
    }
    button:hover { background: #2563eb; }
    .err { color: #f87171; font-size: 0.85rem; margin-top: 0.5rem; }
    .footer { margin-top: 2rem; font-size: 0.8rem; color: #64748b; text-align: center; }
    .footer a { color: #94a3b8; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîÑ JSON ‚Üî YAML –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä</h1>
    <p class="sub">–ë—ã—Å—Ç—Ä–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –ª–µ—Ç—É. –í—Å—ë –≤ –±—Ä–∞—É–∑–µ—Ä–µ.</p>

    <div class="row">
      <div class="card" id="jsonCard">
        <label>JSON</label>
        <textarea id="json" placeholder='{"name": "example", "items": [1, 2, 3]}'></textarea>
        <div class="err" id="jsonErr"></div>
        <div class="btns">
          <button onclick="jsonToYaml()">‚Üí –≤ YAML</button>
          <button onclick="formatJson()">–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button onclick="copyJson()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
      <div class="arrow">
        <span onclick="jsonToYaml()" title="JSON ‚Üí YAML">‚Üí</span>
        <span style="margin: 0 0.5rem;">|</span>
        <span onclick="yamlToJson()" title="YAML ‚Üí JSON">‚Üê</span>
      </div>
      <div class="card" id="yamlCard">
        <label>YAML</label>
        <textarea id="yaml" placeholder="name: example\nitems:\n  - 1\n  - 2\n  - 3"></textarea>
        <div class="err" id="yamlErr"></div>
        <div class="btns">
          <button onclick="yamlToJson()">‚Üí –≤ JSON</button>
          <button onclick="copyYaml()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
      </div>
    </div>

    <p class="footer">
      <a href="https://github.com/waplebe/json-yaml-converter">–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥</a> ¬∑ <a href="https://github.com/waplebe/project-ideas">project-ideas</a>
    </p>
  </div>
  <script>
    const jsonEl = document.getElementById('json');
    const yamlEl = document.getElementById('yaml');
    const jsonCard = document.getElementById('jsonCard');
    const yamlCard = document.getElementById('yamlCard');
    const jsonErr = document.getElementById('jsonErr');
    const yamlErr = document.getElementById('yamlErr');

    function clearErrors() {
      jsonErr.textContent = '';
      yamlErr.textContent = '';
      jsonCard.classList.remove('error');
      yamlCard.classList.remove('error');
    }

    function jsonToYaml() {
      clearErrors();
      const s = jsonEl.value.trim();
      if (!s) {
        yamlErr.textContent = '–í–≤–µ–¥–∏—Ç–µ JSON';
        yamlCard.classList.add('error');
        return;
      }
      try {
        const obj = JSON.parse(s);
        yamlEl.value = jsyaml.dump(obj, { lineWidth: -1, quotingType: '"' });
      } catch (e) {
        jsonErr.textContent = '–û—à–∏–±–∫–∞ JSON: ' + e.message;
        jsonCard.classList.add('error');
      }
    }

    function yamlToJson() {
      clearErrors();
      const s = yamlEl.value.trim();
      if (!s) {
        yamlErr.textContent = '–í–≤–µ–¥–∏—Ç–µ YAML';
        yamlCard.classList.add('error');
        return;
      }
      try {
        const obj = jsyaml.load(s);
        jsonEl.value = JSON.stringify(obj, null, 2);
      } catch (e) {
        yamlErr.textContent = '–û—à–∏–±–∫–∞ YAML: ' + e.message;
        yamlCard.classList.add('error');
      }
    }

    function formatJson() {
      clearErrors();
      const s = jsonEl.value.trim();
      if (!s) return;
      try {
        const obj = JSON.parse(s);
        jsonEl.value = JSON.stringify(obj, null, 2);
      } catch (e) {
        jsonErr.textContent = '–û—à–∏–±–∫–∞ JSON: ' + e.message;
        jsonCard.classList.add('error');
      }
    }

    function copyJson() {
      const s = jsonEl.value.trim();
      if (!s) return;
      navigator.clipboard.writeText(s).then(() => alert('JSON —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω'));
    }

    function copyYaml() {
      const s = yamlEl.value.trim();
      if (!s) return;
      navigator.clipboard.writeText(s).then(() => alert('YAML —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω'));
    }

    jsonEl.addEventListener('input', () => {
      clearErrors();
      const s = jsonEl.value.trim();
      if (s) {
        try {
          JSON.parse(s);
        } catch (e) {
          jsonErr.textContent = e.message;
          jsonCard.classList.add('error');
        }
      }
    });

    yamlEl.addEventListener('input', () => {
      clearErrors();
      const s = yamlEl.value.trim();
      if (s) {
        try {
          jsyaml.load(s);
        } catch (e) {
          yamlErr.textContent = e.message;
          yamlCard.classList.add('error');
        }
      }
    });
  </script>
</body>
</html>
